물론이죠. 사용자들이 겪었던 문제와 방금 나눈 대화 내용을 모두 반영해서 `README.md` 파일을 새롭게 업데이트했습니다.

이 버전을 사용하시면 다른 사람들이 겪을 수 있는 대부분의 문제를 예방할 수 있을 겁니다.

-----

# AR-Memo Backend Server

AR-Memo 프로젝트의 백엔드 서버입니다. Docker를 사용하여 간편하게 개발 환경을 구축하고 실행할 수 있습니다.

## 🚀 시작하기

이 가이드를 따라 다른 PC에서도 손쉽게 프로젝트를 실행할 수 있습니다.

### 필수 요구사항

프로젝트를 실행하기 위해 아래 프로그램들이 반드시 설치되어 있어야 합니다.

* **[Git](https://git-scm.com/downloads)**: 소스 코드를 내려받기 위해 필요합니다.
* **[Docker Desktop](https://www.docker.com/products/docker-desktop/)**: 컨테이너를 실행하고 관리하기 위해 필요합니다. Docker Desktop에는 Docker Compose가 포함되어 있습니다.

-----

### 🛠️ 개발 환경 설정

#### 1\. 소스 코드 복제 (Clone)

먼저 Git을 사용하여 원격 저장소에서 프로젝트 소스 코드를 복제합니다.

```bash
git clone <저장소_URL>
cd ar-memo-backend
```

#### 2\. `docker-compose.yml` 확인

프로젝트 루트 디렉토리에 있는 `docker-compose.yml` 파일이 서버 실행에 필요한 모든 설정을 담고 있습니다. 별도로 수정할 필요는 없습니다.

-----

### ▶️ 서버 실행 및 관리

#### 1\. Docker Hub 로그인 (최초 1회 필수)

서버를 처음 시작하기 전, 데이터베이스(`mongo`) 이미지를 다운로드하기 위해 Docker Hub에 로그인해야 합니다. 이 과정은 PC에서 최초 한 번만 진행하면 됩니다.

1.  터미널에서 아래 명령어를 입력합니다.
    ```bash
    docker login
    ```
2.  Docker Hub 아이디와 비밀번호를 입력하여 로그인합니다.
    * **⚠️ 중요**: 로그인 후 반드시 **이메일 인증**을 완료해야 이미지를 정상적으로 다운로드할 수 있습니다. Docker Hub에서 보낸 인증 메일을 확인하고 링크를 클릭해 주세요. 이메일이 오지 않는다면 스팸 편지함을 확인하거나 Docker Hub 설정에서 인증 메일을 재전송하세요.

#### 2\. 서버 시작하기

로그인이 완료되었다면, 프로젝트 폴더의 터미널에서 아래 명령어 단 한 줄만 입력하면 데이터베이스와 백엔드 서버가 모두 실행됩니다.

```bash
docker-compose up -d --build
```

* `up`: `docker-compose.yml`에 정의된 모든 서비스를 시작합니다.
* `-d`: 컨테이너를 백그라운드에서 실행합니다.
* `--build`: 최초 실행 시 `Dockerfile`을 이용해 이미지를 새로 빌드합니다.

서버가 정상적으로 시작되면 **`http://localhost:4000`** 주소로 API 요청을 보낼 수 있습니다.

#### 3\. 서버 완전히 종료하기

프로젝트를 종료하고 관련 컨테이너와 네트워크를 모두 깔끔하게 정리하려면 아래 명령어를 사용합니다.

```bash
docker-compose down
```

데이터베이스 파일은 `mongo-data`라는 볼륨에 안전하게 보관되므로, 이 명령어를 실행해도 데이터가 삭제되지 않습니다.

-----

### 🔄 코드 수정 및 서버 재시작 안내

개발 환경에서는 코드를 수정해도 서버를 다시 켤 필요가 없는 경우가 대부분입니다.

#### ✅ 그냥 저장만 하세요 (`.js` 파일 수정 시)

`src` 폴더 안에 있는 JavaScript 파일(`*.js`)을 수정하고 저장하면 **서버가 자동으로 재시작**됩니다. 별도의 명령어를 입력할 필요가 없습니다.

* **이유**: `docker-compose.yml` 파일에 설정된 `volumes`가 내 PC의 `src` 폴더와 컨테이너의 `src` 폴더를 실시간으로 동기화하고, `command: npm run dev`로 실행된 `nodemon`이 파일 변경을 감지하여 서버를 자동으로 재시작해주기 때문입니다.

#### ⚠️ 서버를 다시 빌드해야 할 때

아래와 같은 경우에는 이미지를 새로 만들어야 하므로 `--build` 옵션을 붙여서 실행해야 합니다.

* `package.json`을 수정하여 새로운 라이브러리를 추가/삭제한 경우
* `Dockerfile` 자체를 수정한 경우

<!-- end list -->

```bash
docker-compose up -d --build
```

### 요약

| 상황 | 명령어 | 설명 |
| :--- | :--- | :--- |
| **`.js` 코드만 수정할 때** | (없음) | 그냥 저장만 하면 `nodemon`이 알아서 반영해줍니다. |
| **PC 재부팅 또는 `down` 이후 서버를 다시 켤 때** | `docker-compose up -d` | 이미지를 재사용하여 빠르게 서버를 시작합니다. |
| **라이브러리(패키지)를 새로 설치했을 때** | `docker-compose up -d --build` | 변경된 의존성을 설치하고 이미지를 새로 만듭니다. |

-----

### 🧪 API 테스트

[Postman](https://www.postman.com/downloads/)과 같은 API 테스트 도구를 사용하여 서버가 잘 동작하는지 확인할 수 있습니다.

1.  **Postman Collection 가져오기**: 함께 제공된 `ar-memo-backend.postman_collection.json` 파일을 Postman의 `Import` 기능을 통해 불러옵니다.
2.  **API 테스트**: `Auth` -\> `회원가입` 요청부터 순서대로 실행하며 API를 테스트합니다. 로그인 후 발급되는 토큰은 다른 API를 호출할 때 자동으로 사용됩니다.